/// 태그 정보를 저장하는 테이블
model Tag {
  id   String @id
  name String @unique

  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  deletedAt DateTime? @map("deleted_at") @db.Timestamptz

  articles ArticleTag[]
  series   SeriesTag[]

  @@map("tag")
}

/// 게시글과 태그의 N:M 관계를 저장하는 중간 테이블
model ArticleTag {
  articleId String @map("article_id")
  tagId     String @map("tag_id")

  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  deletedAt DateTime? @map("deleted_at") @db.Timestamptz

  article Article @relation(fields: [articleId], references: [id])
  tag     Tag     @relation(fields: [tagId], references: [id])

  @@id([articleId, tagId])
  @@map("article_tag")
}

/// 시리즈와 태그의 N:M 관계를 저장하는 중간 테이블
model SeriesTag {
  seriesId String @map("series_id")
  tagId    String @map("tag_id")

  createdAt DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  deletedAt DateTime? @map("deleted_at") @db.Timestamptz

  series Series @relation(fields: [seriesId], references: [id])
  tag    Tag    @relation(fields: [tagId], references: [id])

  @@id([seriesId, tagId])
  @@map("series_tag")
}
